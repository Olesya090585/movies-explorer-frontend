{"ast":null,"code":"var _jsxFileName = \"/Users/o.varnakova/dev/diplom/movies-explorer-frontend/movies-explorer-frontend/src/components/App/App.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Routes, Route, useNavigate, useLocation } from \"react-router-dom\";\nimport Main from \"../Main/Main\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\nimport Profile from \"../Profile/Profile\";\nimport Register from \"../Register/Register\";\nimport Login from \"../Login/Login\";\nimport Notfound from \"../Notfound/Notfound\";\nimport MainApi from \"../../utils/MainApi\";\nimport \"../App/App.css\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [isLoggedIn, setLoggedIn] = React.useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  function handleSubmitLogin(data) {\n    const {\n      email,\n      password\n    } = data;\n    MainApi.login(email, password).then(data => {\n      localStorage.setItem(\"token\", data.token);\n      setLoggedIn(true);\n      setError(\"\");\n      navigate(\"/movies\");\n    }).catch(err => {\n      if (err.status === 400) {\n        return setError(\"Вы ввели неправильный логин или пароль\");\n      }\n      setError(\"При авторизации произошла ошибка\");\n    });\n    // .finally(() => {\n    //   setIsSbmitting(false);\n    // });\n    // function checkToken() {\n    //   const jwt = localStorage.getItem(\"token\");\n    //   api.getContent(jwt)\n    //     .then((data) => {\n    //       if (!data) {\n    //         return;\n    //       }\n    //       setLoggedIn(true);\n    //       navigate(location.pathname);\n    //     })\n    //     .catch((err) => {\n    //       setLoggedIn(false);\n    //       // console.error(`Ошибка: ${err}`);\n    //     });\n    // }\n    // React.useEffect(() => {\n    //   checkToken();\n    //   // eslint-disable-next-line react-hooks/exhaustive-deps\n    // }, []);\n    // React.useEffect(() => {\n    //   const jwt = localStorage.getItem(\"token\");\n    //   if (isLoggedIn) {\n    //     api.getUserData(jwt)\n    //       .then((data) => {\n    //         setCurrentUser(data);\n    //       })\n    //       .catch((err) => {\n    //         console.error(`Ошибка: ${err}`);\n    //       });\n    //     // MainApi\n    //     // .getInitialCards(jwt)\n    //     // .then((cards) => {\n    //     //   setCards(cards.reverse());\n    //     // })\n    //     // .catch((err) => {\n    //     //   console.error(`Ошибка: ${err}`);\n    //     // });\n    //   }\n    // }, [isLoggedIn]);\n\n    function handleLoggedIn() {\n      setLoggedIn(true);\n    }\n    function handlePageBack() {\n      navigate(-1);\n    }\n    return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page\",\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(Main, {\n              isLoggedIn: isLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/movies\",\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              element: Movies,\n              isLoggedIn: isLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/saved-movies\",\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              element: SavedMovies,\n              isLoggedIn: isLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/profile\",\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              element: Profile,\n              isLoggedIn: isLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/signup\",\n            element: /*#__PURE__*/_jsxDEV(Register, {\n              isLoggedIn: !isLoggedIn,\n              handleLoggedIn: handleLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/signin\",\n            element: /*#__PURE__*/_jsxDEV(Login, {\n              isLoggedIn: !isLoggedIn,\n              handleLoggedIn: handleLoggedIn\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(Notfound, {\n              onBack: handlePageBack\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this);\n  }\n}\n_s(App, \"Pbdkk6NtPAbNYWTf73DPB4ZTZ80=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Routes","Route","useNavigate","useLocation","Main","Movies","SavedMovies","Profile","Register","Login","Notfound","MainApi","CurrentUserContext","ProtectedRoute","jsxDEV","_jsxDEV","App","_s","currentUser","setCurrentUser","useState","isLoggedIn","setLoggedIn","navigate","location","handleSubmitLogin","data","email","password","login","then","localStorage","setItem","token","setError","catch","err","status","handleLoggedIn","handlePageBack","Provider","value","children","className","path","element","fileName","_jsxFileName","lineNumber","columnNumber","onBack","_c","$RefreshReg$"],"sources":["/Users/o.varnakova/dev/diplom/movies-explorer-frontend/movies-explorer-frontend/src/components/App/App.js"],"sourcesContent":["import React from \"react\";\nimport { Routes, Route, useNavigate, useLocation } from \"react-router-dom\";\nimport Main from \"../Main/Main\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\nimport Profile from \"../Profile/Profile\";\nimport Register from \"../Register/Register\";\nimport Login from \"../Login/Login\";\nimport Notfound from \"../Notfound/Notfound\";\nimport MainApi from \"../../utils/MainApi\";\nimport \"../App/App.css\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [isLoggedIn, setLoggedIn] = React.useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  function handleSubmitLogin(data) {\n    const { email, password } = data;\n    MainApi.login(email, password)\n      .then((data) => {\n        localStorage.setItem(\"token\", data.token);\n        setLoggedIn(true);\n        setError(\"\");\n        navigate(\"/movies\");\n      })\n      .catch((err) => {\n        if (err.status === 400) {\n          return setError(\"Вы ввели неправильный логин или пароль\");\n        }\n        setError(\"При авторизации произошла ошибка\");\n      });\n      // .finally(() => {\n      //   setIsSbmitting(false);\n      // });\n  // function checkToken() {\n  //   const jwt = localStorage.getItem(\"token\");\n  //   api.getContent(jwt)\n  //     .then((data) => {\n  //       if (!data) {\n  //         return;\n  //       }\n  //       setLoggedIn(true);\n  //       navigate(location.pathname);\n  //     })\n  //     .catch((err) => {\n  //       setLoggedIn(false);\n  //       // console.error(`Ошибка: ${err}`);\n  //     });\n  // }\n  // React.useEffect(() => {\n  //   checkToken();\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n  // React.useEffect(() => {\n  //   const jwt = localStorage.getItem(\"token\");\n  //   if (isLoggedIn) {\n  //     api.getUserData(jwt)\n  //       .then((data) => {\n  //         setCurrentUser(data);\n  //       })\n  //       .catch((err) => {\n  //         console.error(`Ошибка: ${err}`);\n  //       });\n  //     // MainApi\n  //     // .getInitialCards(jwt)\n  //     // .then((cards) => {\n  //     //   setCards(cards.reverse());\n  //     // })\n  //     // .catch((err) => {\n  //     //   console.error(`Ошибка: ${err}`);\n  //     // });\n  //   }\n  // }, [isLoggedIn]);\n\n  function handleLoggedIn() {\n    setLoggedIn(true);\n  }\n  function handlePageBack() {\n    navigate(-1);\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Routes>\n          <Route path=\"/\" element={<Main isLoggedIn={isLoggedIn} />} />\n          <Route\n            path=\"/movies\"\n            element={\n              <ProtectedRoute element={Movies} isLoggedIn={isLoggedIn} />\n            }\n          />\n\n          <Route\n            path=\"/saved-movies\"\n            element={\n              <ProtectedRoute element={SavedMovies} isLoggedIn={isLoggedIn} />\n            }\n          />\n          <Route\n            path=\"/profile\"\n            element={\n              <ProtectedRoute element={Profile} isLoggedIn={isLoggedIn} />\n            }\n          />\n\n          <Route\n            path=\"/signup\"\n                element={<Register\n                isLoggedIn={!isLoggedIn}\n                handleLoggedIn={handleLoggedIn}\n              />\n            }\n          />\n          <Route\n            path=\"/signin\"\n                element={<Login \n                isLoggedIn={!isLoggedIn}\n                handleLoggedIn={handleLoggedIn}\n              />\n            }\n          />\n          <Route path=\"*\" element={<Notfound onBack={handlePageBack} />} />\n        </Routes>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n}\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}